var f=(M,p,i)=>new Promise((w,m)=>{var C=r=>{try{b(i.next(r))}catch(D){m(D)}},h=r=>{try{b(i.throw(r))}catch(D){m(D)}},b=r=>r.done?w(r.value):Promise.resolve(r.value).then(C,h);b((i=i.apply(M,p)).next())});import{A as X,P as Z,j as ee,r as k,bn as ae,al as te,B as _,D as v,w as u,a5 as s,u as a,bp as P,bq as R,bx as T,aa as q,ao as G,a1 as O,ad as c,J as x,by as U,aS as S,a4 as se,aY as ue,H as F,M as ne,bt as le,K as g,bs as E,bu as oe}from"./vendor.a45ea33e.js";/* empty css               *//* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css               */import{a as ie,f as re,ao as de,ap as A,ad as pe,ae as ce,aq as _e,ar as ge}from"./index.aaa1a380.js";const me=c("\u641C\u7D22"),fe=["onClick"],ve={key:0},Ce=c("\u542F\u7528"),ye={key:1},ke=c("\u7981\u7528"),Se={key:0},he=c("\u54CD\u5E94"),be={key:1},De=c("\u6C89\u9ED8"),Ie=c("\u542F\u7528"),xe=c("\u7981\u7528"),Fe=c("\u8FD8\u539F"),Le=c("\u54CD\u5E94"),$e=c("\u6C89\u9ED8"),Te=X({setup(M){const{prefixCls:p}=ie("plugin");console.log("prefixCls",p);const i=Z({pluginNames:[],groupIdList:[0],friendIdList:[]}),w=ee(()=>({labelCol:{span:4},wrapperCol:{span:14}})),m=k([]),C=k([]),h=k([]),b=re(),r=k([]),D=[{title:"\u63D2\u4EF6\u540D",dataIndex:"name",key:"name",slots:{customRender:"name"}},{title:"\u7FA4\u540D",dataIndex:"group_name",key:"group_name"},{title:"\u597D\u53CB\u540D",dataIndex:"friend_name",key:"friend_name"},{title:"\u63D2\u4EF6\u72B6\u6001",dataIndex:"pluginStatus",key:"pluginStatus",slots:{customRender:"pluginStatus"}},{title:"\u54CD\u5E94\u72B6\u6001",dataIndex:"responseStatus",key:"responseStatus",slots:{customRender:"responseStatus"}},{title:"\u64CD\u4F5C",dataIndex:"action",key:"action",slots:{customRender:"action"}}],L=k(!1),I=k(),V=(n,o)=>f(this,null,function*(){I.value=yield de({groupId:n,name:o}),L.value=!0}),z=n=>{console.log(n),L.value=!1},H=n=>f(this,null,function*(){m.value=yield A({groupId:n})}),{qq:j}=ae(b),J=()=>f(this,null,function*(){C.value=yield pe({selfId:j.value}),C.value.unshift({group_id:0,group_name:"\u5168\u90E8\u7FA4\u804A",group_create_time:0,group_level:0,max_member_count:0,member_count:0})}),K=()=>f(this,null,function*(){h.value=yield ce({selfId:j.value})}),B=(n,o,e)=>f(this,null,function*(){yield _e({groupId:n,name:o,status:e}),r.value.filter(l=>l.gid===n&&l.name===o).forEach(l=>{l.pluginStatus=e})}),N=(n,o)=>f(this,null,function*(){yield ge({groupId:n,status:o}),r.value.filter(e=>e.gid===n).forEach(e=>{e.responseStatus=o})}),Y=n=>{console.log(`selected ${n}`)},Q=n=>{console.log(`selected ${n}`)},W=()=>f(this,null,function*(){r.value=[];const n=i.groupIdList.filter(t=>t>=0),o=i.groupIdList.filter(t=>t<0).map(t=>-t);let e=C.value.filter(t=>n.includes(t.group_id));for(let t of e){let y=(yield A({groupId:t.group_id})).filter(d=>i.pluginNames.includes(d.name));for(let d of y)r.value.push({key:t.group_name+d.name,name:d.name,friend_name:"",group_name:t.group_name,gid:t.group_id,pluginStatus:d.pluginStatus,responseStatus:d.responseStatus})}let l=h.value.filter(t=>o.includes(t.user_id));for(let t of l){let y=(yield A({groupId:-t.user_id})).filter(d=>i.pluginNames.includes(d.name));for(let d of y)r.value.push({key:t.nickname+d.name,name:d.name,friend_name:t.nickname,group_name:"",gid:-t.user_id,pluginStatus:d.pluginStatus,responseStatus:d.responseStatus})}});return H(0),te(()=>{J(),K()}),(n,o)=>(_(),v("div",null,[u(a(ue),se({layout:"horizontal"},a(w),{model:a(i)}),{default:s(()=>[u(a(P),{label:"\u63D2\u4EF6\u540D"},{default:s(()=>[u(a(R),{value:a(i).pluginNames,"onUpdate:value":o[0]||(o[0]=e=>a(i).pluginNames=e),mode:"multiple",style:{width:"40%"},placeholder:"\u8BF7\u9009\u62E9\u63D2\u4EF6\u540D",options:m.value.map((e,l)=>({value:m.value[l].name,label:m.value[l].name+" ( "+m.value[l].brief+" )"})),onChange:Y},null,8,["value","options"])]),_:1}),u(a(P),{label:"\u7FA4\u804A & \u597D\u53CB"},{default:s(()=>[u(a(R),{value:a(i).groupIdList,"onUpdate:value":o[1]||(o[1]=e=>a(i).groupIdList=e),mode:"multiple",style:{width:"40%"},placeholder:"\u8BF7\u9009\u62E9\u7FA4\u804A & \u597D\u53CB",onChange:Q},{default:s(()=>[u(a(T),{label:"\u7FA4\u804A"},{default:s(()=>[(_(!0),v(q,null,G(C.value,e=>(_(),O(a(U),{value:e.group_id,key:e.group_id},{default:s(()=>[c(x(e.group_name+" ("+e.group_id+")"),1)]),_:2},1032,["value"]))),128))]),_:1}),u(a(T),{label:"\u597D\u53CB"},{default:s(()=>[(_(!0),v(q,null,G(h.value,e=>(_(),O(a(U),{value:-e.user_id,key:e.user_id},{default:s(()=>[c(x(e.nickname+" ("+e.user_id+")"),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1}),u(a(P),{"wrapper-col":{span:14,offset:4}},{default:s(()=>[u(a(S),{type:"primary",onClick:W},{default:s(()=>[me]),_:1})]),_:1})]),_:1},16,["model"]),u(a(oe),{dataSource:r.value,columns:D},{name:s(({record:e})=>{var l;return[F("a",{onClick:t=>V(e.gid,e.name)},x(e.name),9,fe),u(a(ne),{visible:L.value,"onUpdate:visible":o[2]||(o[2]=t=>L.value=t),title:(l=I.value)==null?void 0:l.name,onOk:z},{default:s(()=>{var t,$,y;return[F("span",{class:g(`${a(p)}__info`)},[u(a(le),{src:(t=I.value)==null?void 0:t.banner,class:g(`${a(p)}__banner`)},null,8,["src","class"]),F("p",{class:g(`${a(p)}__brief`)},x(($=I.value)==null?void 0:$.brief),3),F("p",{class:g(`${a(p)}__usage`)},x((y=I.value)==null?void 0:y.usage),3)],2)]}),_:1},8,["visible","title"])]}),pluginStatus:s(({text:e})=>[e?(_(),v("span",ve,[u(a(E),{color:"green"},{default:s(()=>[Ce]),_:1})])):(_(),v("span",ye,[u(a(E),{color:"red"},{default:s(()=>[ke]),_:1})]))]),responseStatus:s(({text:e})=>[e?(_(),v("span",Se,[u(a(E),{color:"green"},{default:s(()=>[he]),_:1})])):(_(),v("span",be,[u(a(E),{color:"red"},{default:s(()=>[De]),_:1})]))]),action:s(({record:e})=>[F("span",null,[u(a(S),{type:"primary",onClick:l=>B(e.gid,e.name,1),class:g(`${a(p)}__action`)},{default:s(()=>[Ie]),_:2},1032,["onClick","class"]),u(a(S),{danger:"",onClick:l=>B(e.gid,e.name,0),class:g(`${a(p)}__action`)},{default:s(()=>[xe]),_:2},1032,["onClick","class"]),u(a(S),{type:"primary",onClick:l=>B(e.gid,e.name,2),class:g(`${a(p)}__action`)},{default:s(()=>[Fe]),_:2},1032,["onClick","class"]),u(a(S),{type:"primary",onClick:l=>N(e.gid,1),class:g(`${a(p)}__action`)},{default:s(()=>[Le]),_:2},1032,["onClick","class"]),u(a(S),{danger:"",onClick:l=>N(e.gid,0),class:g(`${a(p)}__action`)},{default:s(()=>[$e]),_:2},1032,["onClick","class"])])]),_:1},8,["dataSource"])]))}});export{Te as default};
